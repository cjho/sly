/* Sly v1.0rc0 <http://sly.digitarald.com> - (C) 2009 Harald Kirschner <http://digitarald.de> - Open source under MIT License */
var Sly=(function(){var o={};var b=function(e){return o[e]||(o[e]=new b.initialize(e))};b.initialize=function(e){this.text=(typeof(e)=="string")?e.replace(/^\s+/,""):""};var r=b.initialize.prototype=b.prototype;b.implement=function(i,e){for(var A in e){b[i][A]=e[A]}};b.features={querySelector:!!(document.querySelectorAll),elementsByClass:!!(document.getElementsByClassName)};var p=function(){return true};r.search=function(B,H){var D;if(!B){B=document}else{D=(B instanceof Array)}var J;if(!D&&b.features.querySelector&&B.nodeType==9){try{J=B.querySelectorAll(this.text)}catch(Q){}if(J){return(H)?J[0]:b.toArray(J)}}var F=this.parse();var I={};var P=b.getUid;var R=function(i){var e=P(i);return(I[e])?null:(I[e]=true)};var E,K,A={},C={};for(var O=0,N;(N=F[O]);O++){var G=R;if(N.first){if(!J){G=p}if(D){K=B}else{if(N.combinator){K=[B]}}}if(N.last&&J){I=A;E=J}else{I={};E=[]}if(!N.combinator){E=N.combine(E,B,N,C,G,!(E.length))}else{for(var M=0,L=K.length;M<L;M++){E=N.combine(E,K[M],N,C,G)}}if(N.last){if(E.length){if(H){return E[0]}J=E}}else{K=E}}return(H)?((J)?J[0]:null):(J||[])};r.find=function(e){return this.search(e,true)};r.match=function(e){return !!(this.parse()[0].match(e,{}))};r.filter=function(e){var C=[],A=this.parse()[0].match;for(var B=0,D;(D=e[B]);B++){if(A(D)){C.push(D)}}return C};var x;b.recompile=function(){var i,e=[","],A=["!"];for(i in m){if(i!=" "){e[(i.length>1)?"unshift":"push"](b.escapeRegExp(i))}}for(i in t){A.push(i)}x=new RegExp("[\\w\\u00c0-\\uFFFF][\\w\\u00c0-\\uFFFF-]*|[#.][\\w\\u00c0-\\uFFFF-]+|[ \\t\\r\\n\\f](?=[\\w\\u00c0-\\uFFFF*#.[:])|("+e.join("|")+")[ \\t\\r\\n\\f]*|\\[([\\w\\u00c0-\\uFFFF-]+)(?:(["+A.join("")+"]?=)(?:\"([^\"]*)\"|'([^']*)'|([^\\]]*)))?]|:([-\\w\\u00c0-\\uFFFF]+)(?:\\((?:\"([^\"]*)\"|'([^']*)'|([^)]*))\\))?|\\*","g")};var k=function(e){return{ident:[],classes:[],attributes:[],pseudos:[],combinator:e}};var g=function(e){return e};r.parse=function(G){var C=(G)?"plain":"parsed";if(this[C]){return this[C]}var F=(G)?g:this.compute;var E=[],B=k(null);B.first=true;var D=function(H){E.push(F(B));B=k(H)};var A,i;while((A=x.exec(this.text))){i=A[0];switch(i.charAt(0)){case".":B.classes.push(i.slice(1));break;case"#":B.id=i.slice(1);break;case"[":B.attributes.push({name:A[2],operator:A[3]||null,value:A[4]||A[5]||A[6]||null});break;case":":B.pseudos.push({name:A[7],value:A[8]||A[9]||A[10]||null});break;case",":B.last=true;D(null);B.first=true;continue;case" ":case"\t":case"\r":case"\n":case"\f":A[1]=" ";default:var e=A[1];if(e){if(B.first&&!B.ident.length){B.combinator=e}else{D(e)}}else{if(i!="*"){B.tag=i}}}B.ident.push(i)}B.last=true;E.push(F(B));return(this[C]=E)};function s(A,i,e,B){var C=(A)?((B)?function(D,E){return i(D,e,E)&&A(D,E)}:function(D,E){return A(D,E)&&i(D,e,E)}):function(D,E){return i(D,e,E)};C.$slyIndex=(A)?(A.$slyIndex+1):0;return C}var j=function(){return true};var z=function(e,i){return(e.id==i)};var c=function(i,e){return(i.nodeName==e)};var h=function(e){return(new RegExp("(?:^|[ \\t\\r\\n\\f])"+e+"(?:$|[ \\t\\r\\n\\f])"))};var f=function(e,i){return e.className&&i.test(e.className)};var n=function(e){if(!e.operator||!e.value){return e}var i=t[e.operator];if(i){e.escaped=b.escapeRegExp(e.value);e.pattern=new RegExp(i(e.value,e.escaped,e))}return e};var q=function(i,e){var A=b.getAttribute(i,e.name);switch(e.operator){case null:return A;case"=":return(A==e.value);case"!=":return(A!=e.value)}if(!A&&e.value){return false}return e.pattern.test(A)};r.compute=function(E){var F,K,G,L,C,B,M=E.tag,A=E.id,D=E.classes;var H=(M)?M.toUpperCase():null;if(A){B=true;C=s(C,z,A);L=function(N){if(N.getElementById){var O=N.getElementById(A);return(O&&(!H||O.nodeName==H))?[O]:[]}var Q=N.getElementsByTagName(M||"*");for(var i=0,P;(P=Q[i]);i++){if(P.id==A){return[P]}}return[]}}if(D.length>0){if(!L&&b.features.elementsByClass){for(F=0;(K=D[F]);F++){C=s(C,f,h(K))}var J=D.join(" ");L=function(i){return i.getElementsByClassName(J)}}else{if(!L&&D.length==1){B=true;var I=h(D[0]);C=s(C,f,I);L=function(O){var R=O.getElementsByTagName(M||"*");var Q=[];for(var N=0,P;(P=R[N]);N++){if(P.className&&I.test(P.className)){Q.push(P)}}return Q}}else{for(F=0;(K=D[F]);F++){G=s(G,f,h(K))}}}}if(M){if(!L){C=s(C,c,H);L=function(i){return i.getElementsByTagName(M)}}else{if(!B){G=s(G,c,H)}}}else{if(!L){L=function(i){return i.getElementsByTagName("*")}}}for(F=0;(K=E.pseudos[F]);F++){if(K.name=="not"){G=s(G,function(N,i){return !i(N)},b(K.value).parse()[0].match)}else{var e=d[K.name];G=(e)?s(G,e,K.value):s(G,q,n(K))}}for(F=0;(K=E.attributes[F]);F++){G=s(G,q,n(K))}if((E.simple=!(G))){E.matchAux=j}else{E.matchAux=G;C=s(C,G)}E.match=C||j;E.combine=b.combinators[E.combinator||" "];E.search=L;return E};var m=b.combinators={" ":function(F,B,E,e,I,H){var A=E.search(B);if(H&&E.simple){return b.toArray(A)}for(var G=0,D,C=E.matchAux;(D=A[G]);G++){if(I(D)&&C(D,e)){F.push(D)}}return F},">":function(D,C,e,G,E){var A=e.search(C);for(var B=0,F;(F=A[B]);B++){if(F.parentNode==C&&E(F)&&e.matchAux(F,G)){D.push(F)}}return D},"+":function(A,i,e,C,B){while((i=i.nextSibling)){if(i.nodeType==1){if(B(i)&&e.match(i,C)){A.push(i)}break}}return A},"~":function(A,i,e,C,B){while((i=i.nextSibling)){if(i.nodeType==1){if(!B(i)){break}if(e.match(i,C)){A.push(i)}}}return A}};var d=b.pseudos={"first-child":function(e){return d.index(e,0)},"last-child":function(e){while((e=e.nextSibling)){if(e.nodeType===1){return false}}return true},"only-child":function(A){var i=A;while((i=i.previousSibling)){if(i.nodeType===1){return false}}var e=A;while((e=e.nextSibling)){if(e.nodeType===1){return false}}return true},"nth-child":function(C,E,D){var i=b.parseNth(E||"n");if(i.special!="n"){return d[i.special](C,i.a,D)}D=D||{};D.positions=D.positions||{};var A=b.getUid(C);if(!D.positions[A]){var B=0;while((C=C.previousSibling)){if(C.nodeType!=1){continue}B++;var e=D.positions[b.getUid(C)];if(e!=undefined){B=e+B;break}}D.positions[A]=B}return(D.positions[A]%i.a==i.b)},empty:function(e){return !(e.innerText||e.textContent||"").length},contains:function(e,i){return(e.innerText||e.textContent||"").indexOf(i)!=-1},index:function(A,e){var i=0;while((A=A.previousSibling)){if(A.nodeType==1&&++i>e){return false}}return(i==e)},even:function(e,A,i){return d["nth-child"](e,"2n",i)},odd:function(e,A,i){return d["nth-child"](e,"2n+1",i)}};var t=b.operators={"*=":function(e,i){return i},"^=":function(e,i){return"^"+i},"$=":function(e,i){return e+"$"},"~=":function(e,i){return"(?:^|[ \\t\\r\\n\\f])"+i+"(?:$|[ \\t\\r\\n\\f])"},"|=":function(e,i){return"(?:^|\\|)"+i+"(?:$|\\|)"}};b.getAttribute=function(i,e){if(e=="class"){return i.className}return i.getAttribute(e,2)};var v=function(e){return Array.prototype.slice.call(e)};try{v(document.documentElement.childNodes)}catch(y){v=function(e){if(e instanceof Array){return e}var B=e.length,A=new Array(B);while(B--){A[B]=e[B]}return A}}b.toArray=v;var u=1;b.getUid=(window.ActiveXObject)?function(e){return(e.$slyUid||(e.$slyUid={id:u++})).id}:function(e){return e.$slyUid||(e.$slyUid=u++)};var l={};b.parseNth=function(B){if(l[B]){return l[B]}var A=B.match(/^([+-]?\d*)?([a-z]+)?([+-]?\d*)?$/);if(!A){return false}var i=parseInt(A[1]),e=(A(A[3])||0)-1;i=(isNaN(i))?i:1;while(e<1){e+=i}while(e>=i){e-=i}switch(A[2]){case"n":A={a:i,b:e,special:"n"};break;case"odd":A={a:2,b:0,special:"n"};break;case"even":A={a:2,b:1,special:"n"};break;case"first":A={a:0,special:"index"};break;case"last":A={special:"last-child"};break;case"only":A={special:"only-child"};break;default:A={a:(i-1),special:"index"}}return(l[B]=A)};b.escapeRegExp=function(e){return e.replace(/[-.*+?^${}()|[\]\/\\]/g,"\\$&")};b.generise=function(e){b[e]=function(A){var i=b(A);return i[e].apply(i,Array.prototype.slice.call(arguments,1))}};var a=["parse","search","find","match","filter"];for(var w=0;a[w];w++){b.generise(a[w])}b.recompile();return b})();